openapi: 3.0.1
info:
  title: Alibaba Chinese ASR
  description:|
    This Voice microservice takes in the input audio file  and supports recognizing a short speech that lasts within 1 minute.
    The server returns the recognition result in a JSON format as a response.
  x-additionalinfo: |+
    Suggested Use Cases:
      - Supports the following audio coding formats: pulse-code modulation (PCM) (uncompressed PCM or WAV files), Opus, and 16-bit mono.
      - Supports the following audio sampling rates: 8,000 Hz and 16,000 Hz.
      - Allows you to specify whether to add punctuation marks during post-processing, and whether to convert Chinese numerals to Arabic numerals.
  version: '0.1.0'
  x-subscribelink: automatic_speech_recognition_chi
  x-apitype: small file
  x-apitypedescription: |+
    Fast | Single-Call | 60sec/Call
  x-inputfilelimit: |+
    Process up to 10000 kb of data or chat per API call.
  x-responsetime: |+
    The response rate is slower than the small file API due to large data
  x-billingmethod: |+
    The API is billed by the amount of data transferred.
  x-notes: |+
    Limit cannot exceed 60 seconds (1 minute).
servers:
  - url: 'https://dev-apis.sentient.io'
tags:
- name: "v0.1.0"
  description: "Published Date - Aug 20, 2021"
paths:
  /microservices/voice/alibabachiasr/v0/getpredictions:
    post:
      tags:
        - v0.1.0
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/success'
              example:
                message: Successfully Processed
                results:
                  output: 杀魏忠贤小厨阴道你干吗中场的魏公qq最近上火厉害简单就是为了这失恋所有知情者都不
                status: Success
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/unauthorized'
        '402':
          description: Payment Required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/paymentrequired'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/forbidden'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/notfound'
        '419':
          description: Input Field Missing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inputfieldmissing'
        '413':
          description: Payload Too Large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inputlimitexceeded'
        '415':
          description: Unsupported Media Type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/invalidinput'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/servererror'
        '504':
          description: Gateway Timeout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/gatewaytimeout'
      security:
        - APIAuthorizer: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/input'
#           multipart/form-data:
#             schema:
#               $ref: '#/components/schemas/input'
#         required: true
components:
  schemas:
    success:
      type: object
      properties:
          results:
            type: object
            description: output object 
            example: {"<Json":"Object>"}
            properties:
              output:
                type: string
                example: 杀魏忠贤小厨阴道你干吗中场的魏公qq最近上火厉害简单就是为了这失恋所有知情者都不
                description: The speech recognition result.
          status:
            type: string
            example: Success
            description: The status of the API call success/failure
          message:
            type: string
            example: Successfully Processed
            description: Status Message 
    unauthorized:
      type: object
      properties:
        message:
          type: string
          example: Missing Authentication Token
        status:
          type: string
          example: Failure
    forbidden:
      type: object
      properties:
        message:
          type: string
          example: Access Denied Unauthorized User
        status:
          type: string
          example: Failure
    paymentrequired:
      type: object
      properties:
        message:
          type: string
          example: Insufficient Credits Kindly Top Up
        status:
          type: string
          example: Failure
    notfound:
      type: object
      properties:
        message:
          type: string
          example: Invalid Request URL
        status:
          type: string
          example: Failure
    servererror:
      type: object
      properties:
        message:
          type: string
          example: Internal Server Error
        status:
          type: string
          example: Failure
    gatewaytimeout:
      type: object
      properties:
        message:
          type: string
          example: Request Timeout
        status:
          type: string
          example: Failure
    inputfieldmissing:
      type: object
      properties:
        message:
          type: string
          example: Input Field Missing
        status:
          type: string
          example: Failure
    inputlimitexceeded:
      type: object
      properties:
        message:
          type: string
          example: Input Limit Exceeded
        status:
          type: string
          example: Failure
    invalidinput:
      type: object
      properties:
        message:
          type: string
          example: Invalid Input
        status:
          type: string
          example: Failure
    input:
      type: object      
      properties:
#         filepath:
#           type: string
#           format: binary
#           default: false
#           description: Audio File Object
        wav_base64:
          x-name: wav_base64
          type: string
          default: true
          example: UklGRpxNHQBXQVZFZm10IBAAAAABAAEAgD4AAAB9AAACABAAT ...
          description: |+
            Input audio wav file in base64 format.
        audio_encoding:
          type: string
          default: false
          example: pcm
          description: |+
            The audio coding format. Valid values: pcm, opus. Default value: pcm.
        sample_rate:
          type: number
          default: false
          example: 16000
          description: |+
            The audio sampling rate, in Hz. Valid values: 16000 and 8000. Default value: 16000.
        punctuation_prediction:
          type: boolean
          default: false
          example: false
          description: |+
            Specifies whether to add punctuation marks during post-processing. Valid values: True and False. Default value: False.
        inverse_text_normalization:
          type: boolean
          default: false
          example: false
          description: |+
            Specifies whether to enable inverse text normalization (ITN) during post-processing. Valid values: True and False. Default value: False.
        voice_detection:
          type: boolean
          default: false
          example: false
          description: |+
            Specifies whether to enable voice detection. Valid values: True and False. Default value: False. Note: If voice detection is enabled, the server detects whether the uploaded audio file includes any silent fragment. If the server detects any silent fragment, it removes the silent fragment and the subsequent content without recognizing them. The recognition result varies depending on the model.                   
    versions:
      type: object
      properties: 
        v0.1.0:
         type: array
         items:
          oneOf:
            - type: string
              example: Published Date - Aug 20, 2021
              x-details: Initial version release
              description: Latest Version
  securitySchemes:
    APIAuthorizer:
      type: apiKey
      name: x-api-key
      in: header
      x-amazon-apigateway-authtype: custom
      description: Authentication is done using the x-api-key in the request header
