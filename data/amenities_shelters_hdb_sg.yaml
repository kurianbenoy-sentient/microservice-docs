openapi: 3.0.1
info:
  title: HDB Shelters Locations (SG)
  x-subscribelink: amenities_shelters_hdb_sg
  description: |+
    This Data microservice returns the indicative outline of shelters for all Housing Development Board (HDB) Towns and Estates and only on HDB Land. The features were identified visually from a high definition ortho-rectified aerial imagery and manually digitised. The imagery was obtained from SLA (captured in 2014). Objects largely obstructed by trees, structures and / or shadow are likely not captured in this dataset. The outlines of partially obstructed objects were extrapolated where possible and may not fully represent the actual shape of the actual object. Precinct Pavilions are not included in this microservice.
     A successful call will return a pre-signed URL where the entire dataset can be downloaded as a CSV file.
     The HDB POTH programme makes selected public and non-public datasets available to developers and companies to improve their service offerings to benefit the lives of Singapore citizens. Sentient.io is proud to partner with HDB to manage and facilitate the sharing of data for the POTH Programme.
  x-additionalinfo : |+
    **Match Types:**
    A match type is a match operator. The supported match types are&#58;
    * **match_phrase** - Search within a full text field
      > {"match_phrase":{"properties.QUALITY":"FULLY VISIBLE"}}    
    * **match** - Search within a full text field for a single word
      > {"match":{"properties.QUALITY":"FULLY VISIBLE"}}
    * **exists** - Returns results that contain any indexed value for a field
      > {"exists":{"field":"road_name"}}
    * **bool** - Returns results that must or must_not match with word
      > {"bool":{"must_not":[{"match":{"properties.QUALITY":"FULLY VISIBLE"}}]}}
      > {"bool":{"must":[{"match":{"properties.QUALITY":"FULLY VISIBLE"}}]}}
      > {"bool":{"should":[{"match":{"properties.QUALITY":"FULLY VISIBLE"}}}]}}
      
  version: '2.0.0'
  x-apitype: small file
  x-apitypedescription: |+
    Fast | Single-Call | 10MB/Call
  x-inputfilelimit: |+
    Process up to 10000 kb of data or chat per API call.
  x-responsetime: |+
    Response rate is fast due to small data transfer per call made.
  x-billingmethod: |+
    The API is billed by per request.
  x-notes: |+
    Process up to 10,000 records.
  x-apidetailsdesc: |+
    Provides returns all road works being / to be carried out.
servers:
  - url: 'https://dev-apis.sentient.io'
tags:
- name: "v2.0.0"
  description: "Published Date - Mar 22, 2022"
paths:
   /microservices/data/shelter/v2/getdata:
    post:
      tags:
        - v2.0.0
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/success'
              example:
                message: Successfully Processed
                results:
                  hits:
                  - _id: yJtNsH8B1VPRFDGb9AbO
                    _index: hdb_map_index
                    _score: 0
                    _source:
                      geometry:
                        coordinates:
                            - 103.83896370719248
                            - 1.379917141038405
                            - 103.8389617689625
                            - 1.379914774321904
                            - 103.83895945063658
                            - 1.379912782917438
                            - 103.83895682499933
                            - 1.379911226512886
                            - 103.83895397022681
                            - 1.379910153039367
                            - 103.83895097348078
                            - 1.379909594149399
                            - 103.83894792551727
                            - 1.379909567930089
                            - 103.838944919788
                            - 1.37991007438118
                            - 103.8389420479475
                            - 1.379911099032636
                            - 103.83893939536021
                            - 1.379912609327147
                            - 103.83893704379629
                            - 1.379914560950682
                            - 103.83893506514151
                            - 1.379916893310656
                            - 103.83893351870162
                            - 1.379919536770902
                            - 103.83893245210083
                            - 1.379922409938516
                            - 103.83893189678908
                            - 1.379925425994456
                            - 103.8389318707376
                            - 1.379928492693536
                            - 103.8389323739462
                            - 1.379931517790612
                            - 103.83893339203745
                            - 1.379934409040575
                            - 103.83893489356107
                            - 1.37993707872015
                            - 103.83893683179102
                            - 1.379939444532327
                            - 103.83893915011696
                            - 1.379941436841178
                            - 103.83894177575425
                            - 1.379942993245732
                            - 103.8389446305268
                            - 1.379944066719282
                            - 103.83894762727286
                            - 1.379944624704878
                            - 103.83895067433784
                            - 1.379944651828569
                            - 103.83895368006714
                            - 1.379944144473109
                            - 103.83895655280627
                            - 1.379943120725983
                            - 103.83895920539358
                            - 1.37994160952709
                            - 103.83896155695751
                            - 1.379939657903533
                        type: Polygon
                      lastupdated: '2022-03-22T14:26:12.134Z'
                      properties:
                        FEATID: 32
                        FMEL_UPD_D: '2018-06-29'
                        INC_CRC: 47C214E0ED444693
                        LVL: GROUND LEVEL
                        QUALITY: PARTIALLY VISIBLE
                        TYPE: SHELTER
                      property_type: SHELTER
                      type: Polygon
                      unique_id: 3247c214e0ed444693
                    _type: doc
                  max_score: 0
                  total: 1582
                scroll_id: DnF1ZXJ5VGhlbkZldGNoBQAAAAAAAInzFkd5bEY3VWpqUmpxTGk5SDMxTUF5X2cAAAAAAACJ8hZHeWxGN1VqalJqcUxpOUgzMU1BeV9nAAAAAAAAifQWR3lsRjdVampSanFMaTlIMzFNQXlfZwAAAAAAAIn1Fkd5bEY3VWpqUmpxTGk5SDMxTUF5X2cAAAAAAACJ9hZHeWxGN1VqalJqcUxpOUgzMU1BeV9n
                status: Success
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/unauthorized'
        '402':
          description: Payment Required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/paymentrequired'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/forbidden'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/notfound'
        '419':
          description: Input Field Missing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inputfieldmissing'
        '413':
          description: Payload Too Large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inputlimitexceeded'
        '415':
          description: Unsupported Media Type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/invalidinput'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/servererror'
        '504':
          description: Gateway Timeout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/gatewaytimeout'
      security:
        - APIAuthorizer: []
      requestBody:
        content:
          application/json:
              schema:
                $ref: '#/components/schemas/input'
        required: true
components:
  schemas:
    success:
      type: object
      properties:
        message:
          type: string
          example: Successfully Processed
          description: The detail description on the status
        status:
          type: string
          example: Success
          description: The status of the API call Success/Failure             
        results:
          type: object
          example: {<Json Object>}
          description: Json Object of returned results
          properties:
            type:
              type: string
              example: "Feature"
              description: type
            properties:
              type: object
              example: {<Json Object>}
              description: Json Object of returned results
              properties:
                FEATID:
                  type: integer
                  example: 32
                  description: FEATID
                LVL:
                  type: string
                  example: "GROUND LEVEL"
                  description: LVL
                QUALITY:
                  type: string
                  example: "PARTIALLY VISIBLE"
                  description: Quality
                TYPE:
                  type: string
                  example: "SHELTER"
                  description: type
                INC_CRC:
                  type: string
                  example: "47C214E0ED444693"
                  description: inc_crc
                FMEL_UPD_D:
                  type: string
                  example: "2018-06-29"
                  description: fmel_upd_d
            geometry:
              type: object
              example: {<Json Object>}
              description: Json Object of returned results
              properties:
                type:
                  type: string
                  example: "Polygon"
                  description: type
                coordinates:
                  type: array
                  items:
                    type: array
                    items:
                     type: number
                     example: 103.71618687465097
                             1.348193609950229
                     description: coordinates
    unauthorized:
      type: object
      properties:
        message:
          type: string
          example: Missing Authentication Token
        status:
          type: string
          example: Failure
    forbidden:
      type: object
      properties:
        message:
          type: string
          example: Access Denied Unauthorized User
        status:
          type: string
          example: Failure
    paymentrequired:
      type: object
      properties:
        message:
          type: string
          example: Insufficient Credits Kindly Top Up
        status:
          type: string
          example: Failure
    invalidinput:
      type: object
      properties:
        message:
          type: string
          example: Invalid Input
        status:
          type: string
          example: Failure
    notfound:
      type: object
      properties:
        message:
          type: string
          example: Invalid Request URL
        status:
          type: string
          example: Failure
    servererror:
      type: object
      properties:
        message:
          type: string
          example: Internal Server Error
        status:
          type: string
          example: Failure
    gatewaytimeout:
      type: object
      properties:
        message:
          type: string
          example: Request Timeout
        status:
          type: string
          example: Failure
    inputfieldmissing:
      type: object
      properties:
        message:
          type: string
          example: Input Field Missing
        status:
          type: string
          example: Failure
    inputlimitexceeded:
      type: object
      properties:
        message:
          type: string
          example: Input Limit Exceeded
        status:
          type: string
          example: Failure
    versions:
      type: object
      properties: 
        v2.0.0:
         type: array
         items:
          oneOf:
            - type: string
              example: Published Date - Mar 22, 2022
              x-details: Data structure changed
              description: Latest Version
        v1.0.0:
         type: array
         items:
          oneOf:
            - type: string
              example: Published Date - Apr 15, 2021
              x-details: Optimized release
              description: Archived
        v0.1.0:
         type: array
         items:
          oneOf:
            - type: string
              example: Published Date - Mar 24, 2020
              x-details: Initial version release
              description: Archived
    input:
      type: object
      properties:
        limit:
          type: number
          default: false
          example: 10
          description: The max records to return for the request. Default - 0, Max - 10000
        offset:
          type: number
          default: false
          example: 0
          description: The offset of the record list ie the starting index . Default - 0
        filter:
          type: array
          default: false
          items:
              type: object
          example: [{"match_phrase":{"properties.QUALITY":"FULLY VISIBLE"}}]
          description: |+
            Its a list of filters to refine the search further. Default it returns the today's latest record. Each filter consists of a match type, the field and the value. The possible match types are&#58;
            * match
            * match_phrase
            * exists

  securitySchemes:
    APIAuthorizer:
      type: apiKey
      name: x-api-key
      in: header
      x-amazon-apigateway-authtype: custom
      description: Authentication is done using the x-api-key in the request header
